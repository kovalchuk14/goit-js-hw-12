{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nlet gallery = document.querySelector(\".gallery\");\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n});\n\nexport function createGallery(images) {\n    const markup = images.map((image) => {\n        return `<li class=\"gallery-element\">\n                    <a href=\"${image.largeImageURL}\">\n                        <img src=${image.webformatURL} class=\"gallery-img\" alt=${image.tags}>\n                    </a>\n                    <ul class=\"gallery-list\">\n                        <li class=\"gallery-list-column\">\n                            <p class=\"gallery-list-title\">Likes</p>\n                            <p class=\"gallery-list-counter\">${image.likes}</p>\n                        </li>\n                        <li class=\"gallery-list-column\">\n                            <p class=\"gallery-list-title\">Views</p>\n                            <p class=\"gallery-list-counter\">${image.views}</p>\n                        </li>\n                        <li class=\"gallery-list-column\">\n                            <p class=\"gallery-list-title\">Comments</p>\n                            <p class=\"gallery-list-counter\">${image.comments}</p>\n                        </li>\n                        <li class=\"gallery-list-column\">\n                            <p class=\"gallery-list-title\">Downloads</p>\n                            <p class=\"gallery-list-counter\">${image.downloads}</p>\n                        </li>\n                    </ul>\n                </li>\n        `;\n    }).join(\"\");\n    gallery.insertAdjacentHTML(\"beforeend\", markup);\n    lightbox.refresh();\n}\n\nexport function clearGallery() {\n    gallery.innerHTML = \"\";\n}\n\nexport function showLoader() {\n    document.querySelector(\".loader\").style.display = \"block\";\n}\n\nexport function hideLoader() {\n    document.querySelector(\".loader\").style.display = \"none\";\n}\n\nexport function showLoadMoreButton() {\n    document.querySelector(\".load-button\").style.display = \"block\";\n}\n\nexport function hideLoadMoreButton() {\n    document.querySelector(\".load-button\").style.display = \"none\";\n}","import axios from \"axios\";\n\naxios.defaults.baseURL = \"https://pixabay.com/api\";\n\nexport async function getImagesByQuery(query, page) {\n    let response = await axios.get(\"/\", {\n        params: {\n            key: \"50763024-dac579c8a6c32124d9f634148\",\n            q: query,\n            image_type: \"photo\",\n            orientation: \"horizontal\",\n            safesearch: true,\n            per_page: 15,\n            page: page\n        }\n    });\n    return response.data.hits;\n}\n\nexport async function getHitsCount(line) {\n    let response = await axios.get(\"/\", {\n        params: {\n            key: \"50763024-dac579c8a6c32124d9f634148\",\n            q: line,\n            image_type: \"photo\",\n            orientation: \"horizontal\",\n            safesearch: true,\n        }\n    });\n    return response.data.totalHits;\n}","import { createGallery, clearGallery, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton } from \"./js/render-functions\";\nimport { getImagesByQuery, getHitsCount } from \"./js/pixabay-api\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nlet form = document.querySelector(\".form\");\nform.addEventListener(\"submit\", submitForm);\nlet line = \"\";\nlet page = 1;\nlet totalPage = 1\n\nlet button = document.querySelector(\".load-button\");\n\nasync function submitForm(event) {\n    event.preventDefault();\n    let formData = new FormData(form);\n    let value = formData.get('search-text').trim();\n\n    if (value == \"\") {\n        iziToast.error({\n            title: 'Error',\n            message: 'request can`t be empty'\n        });\n        return;\n    }\n    if (line == value) {\n        return;\n    }\n    line = value;\n    page = 1;\n    totalPage = await getHitsCount(line);\n\n    clearGallery();\n    showLoader();\n    hideLoadMoreButton();\n\n    addElements();\n}\n\nbutton.addEventListener(\"click\", addElements);\n\nasync function addElements() {\n    hideLoadMoreButton();\n    showLoader();\n\n    try {\n        const response = await getImagesByQuery(line, page);\n\n        if (!response || response.length === 0) {\n            iziToast.error({\n                title: 'Error',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n            });\n            return;\n        }\n\n        page++;\n        createGallery(response);\n\n        if (page < totalPage) {\n            showLoadMoreButton();\n        } else {\n            iziToast.show({\n                title: 'END',\n                message: \"We're sorry, but you've reached the end of search results.\",\n            });\n        }\n\n        const firstItem = document.querySelector(\".gallery li:first-child\");\n        if (firstItem) {\n            window.scrollBy({\n                top: firstItem.getBoundingClientRect().height * 2,\n                behavior: \"smooth\",\n            });\n        }\n\n    } catch (error) {\n        iziToast.error({\n            title: 'Error',\n            message: `${error.message || error}`,\n        });\n    } finally {\n        hideLoader();\n    }\n}"],"names":["gallery","lightbox","SimpleLightbox","createGallery","images","markup","image","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","axios","getImagesByQuery","query","page","getHitsCount","line","form","submitForm","totalPage","button","event","value","iziToast","addElements","response","firstItem","error"],"mappings":"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"}